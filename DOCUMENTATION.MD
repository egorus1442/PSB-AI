# Документация для разработчиков API

## Содержание

- [Документация для разработчиков API](#документация-для-разработчиков-api)
  - [Содержание](#содержание)
    - [Регистрация пользователя](#регистрация-пользователя)
    - [Аутентификация и получение токена](#аутентификация-и-получение-токена)
    - [Чат с RAG (публичный доступ)](#чат-с-rag-публичный-доступ)
    - [Создание веб-сессии](#создание-веб-сессии)
    - [Удаление веб-сессии](#удаление-веб-сессии)
    - [Чат с RAG (веб)](#чат-с-rag-веб)
    - [Чат с RAG (бот)](#чат-с-rag-бот)

---

### Регистрация пользователя

\*\*POST \*\*\`\`

Регистрация нового пользователя.

**Запрос:**

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Ответ:**

```json
{
  "message": "User registered successfully."
}
```

---

### Аутентификация и получение токена

\*\*POST \*\*\`\`

Получение JWT токена для аутентификации.

**Запрос:**

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Ответ:**

```json
{
  "access_token": "jwt.token.here",
  "token_type": "Bearer"
}
```

---

### Чат с RAG (публичный доступ)

\*\*POST \*\*\`\`

Отправка сообщения в RAG для аутентифицированных пользователей.

**Запрос:**

```json
{
  "id": "12345",
  "question": "Ваш вопрос",
  "thread_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

**Ответ:**

```json
{
  "id": "12345",
  "answer": "Ответ от системы"
}
```

---

### Создание веб-сессии

\*\*POST \*\*\`\`

Создает веб-сессию и сохраняет идентификатор сессии в куки.

**Параметры запроса:**

* `phone_number` (строка, query параметр)

**Ответ:** Куки с сессией (`session_id`) устанавливаются в браузере.

---

### Удаление веб-сессии

\*\*DELETE \*\*\`\`

Удаляет веб-сессию.

**Ответ:** Куки `session_id` удаляется из браузера.

---

### Чат с RAG (веб)

\*\*POST \*\*\`\`

Отправка сообщения в RAG с идентификатором веб-сессии.

**Запрос:**

```json
{
  "id": "12345",
  "question": "Ваш вопрос",
  "thread_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

Используется куки `session_id`.

**Ответ:**

```json
{
  "id": "12345",
  "answer": "Ответ от системы"
}
```

---

### Чат с RAG (бот)

\*\*POST \*\*\`\`

Отправка сообщения в RAG с идентификатором чата (например, для Telegram-бота).

**Запрос:**

```json
{
  "id": "12345",
  "question": "Ваш вопрос",
  "thread_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

**Параметры запроса:**

* `chat_id` (строка, query параметр)

**Ответ:**

```json
{
  "id": "12345",
  "answer": "Ответ от системы"
}
```
